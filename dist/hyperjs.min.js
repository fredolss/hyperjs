!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).hyperjs=t()}}(function(){return function(){return function t(e,r,n){function o(u,s){if(!r[u]){if(!e[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var f=r[u]={exports:{}};e[u][0].call(f.exports,function(t){var r=e[u][1][t];return o(r||t)},f,f.exports,t,e,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}}()({1:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function u(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(u,s)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(r,"__esModule",{value:!0});var i=t("./errors/HttpError");r.request=function(t){return n(this,void 0,void 0,function(){var e,r;return o(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(o=t,new Promise(function(t,e){var r=new XMLHttpRequest;r.open(o.method,o.url),r.onload=function(){this.status>=200&&this.status<300?t(r.responseText):e({status:this.status,statusText:r.statusText})},r.onerror=function(){e({responseText:r.responseText,status:this.status,statusText:r.statusText})},o.headers&&Object.keys(o.headers).forEach(function(t){r.setRequestHeader(t,o.headers[t])});var n=o.data;n&&"object"==typeof n&&(n=Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")),r.send(n)}))];case 1:return e=n.sent(),[3,3];case 2:throw r=n.sent(),new i.default(t.url,r.status,r.statusText,r.responseText);case 3:return e&&e.length>0?[2,JSON.parse(e)]:[2,void 0]}var o})})}},{"./errors/HttpError":4}],2:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function u(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(u,s)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(r,"__esModule",{value:!0});var i=t("./HttpClient"),u=t("./errors/LinkNotFoundError"),s=t("./errors/ResourceNotLoadedError"),c=t("./TemplateParameters"),a=function(){function t(t,e,r){this.linkMethod=t,this.parentResource=e,this.client=r}return t.prototype.fetch=function(t){return n(this,void 0,void 0,function(){var e;return o(this,function(r){switch(r.label){case 0:return this.resource?[2,this.resource.fetch(t)]:[4,this.parentResource.fetch()];case 1:return r.sent(),e=this.linkMethod(),this.resource=this.client.getResource(e.href),[4,this.resource.fetch(t)];case 2:return r.sent(),[2,this.resource]}})})},Object.defineProperty(t.prototype,"data",{get:function(){return this.resource.data},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return this.resource.put(t,e)},t.prototype.patch=function(t,e){return this.resource.patch(t,e)},t.prototype.post=function(t,e){return this.resource.post(t,e)},t.prototype.delete=function(t,e){return this.resource.delete(t,e)},t.prototype.action=function(t,e,r){return this.resource.action(t,e,r)},t.prototype.followLink=function(e,r,n){var o=this;if(this.resource&&void 0!==this.resource.data)return this.resource.followLink(e,r);return new t(function(){var t=o.resource.data,i=o.client.getLink(e,t);if(void 0===i)throw new u.default(e);var s=i;return{href:c.setParameters(s,r,n),rel:e,method:"GET"}},this,this.client)},t.prototype.getLink=function(t){return this.resource.getLink(t)},t.prototype.hasLink=function(t){return this.resource.hasLink(t)},t}(),f=function(){function t(t){if(void 0===t)throw new Error("resourceParams must be set");if(void 0===t.client)throw new Error("client must be set");this.client=t.client,void 0!==t.resource?(this.resource=t.resource,this.resourceUrl=this.client.getSelf(this.resource)):this.resourceUrl=t.url}return t.prototype.fetch=function(t,e){return n(this,void 0,void 0,function(){var r,n,i;return o(this,function(o){switch(o.label){case 0:return r=c.setParameters(this.resourceUrl,t,e),n={method:"GET",url:r,headers:[]},i=this,[4,this.makeRequest(n)];case 1:return i.resource=o.sent(),[2,this]}})})},Object.defineProperty(t.prototype,"data",{get:function(){return this.resource},enumerable:!0,configurable:!0}),t.prototype.post=function(t,e){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this._action(this.resourceUrl,"POST",t)];case 1:return[2,e.sent()]}})})},t.prototype.put=function(t,e){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this._action(this.resourceUrl,"PUT",t)];case 1:return[2,e.sent()]}})})},t.prototype.patch=function(t,e){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this._action(this.resourceUrl,"PATCH",t)];case 1:return[2,e.sent()]}})})},t.prototype.delete=function(t,e){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this._action(this.resourceUrl,"DELETE",t)];case 1:return[2,e.sent()]}})})},t.prototype.action=function(t,e,r,i){return n(this,void 0,void 0,function(){var n,s;return o(this,function(o){switch(o.label){case 0:if(!(n=this.getLink(t)))throw new u.default(t);return s=c.setParameters(n.href,i),[4,this._action(s,e,r)];case 1:return[2,o.sent()]}})})},t.prototype._action=function(t,e,r){return n(this,void 0,void 0,function(){var n;return o(this,function(o){return n={method:e,url:t,headers:{},data:JSON.stringify(r),contentType:"application/json; charset=utf-8"},[2,this.makeRequest(n)]})})},t.prototype.makeRequest=function(t){return n(this,void 0,void 0,function(){var e,r;return o(this,function(n){switch(n.label){case 0:if(void 0!==(e=this.client.getRequestOptions(this,t)))for(r in void 0!==e.method&&(t.method=e.method),e.headers)t.headers[r]=e.headers[r];return[4,i.request(t)];case 1:return[2,n.sent()]}})})},t.prototype.getLink=function(t){if(void 0===this.resource)throw new s.default(this.resourceUrl);return{rel:t,href:this.client.getLink(t,this.resource)}},t.prototype.hasLink=function(t){return void 0!==this.getLink(t)},t.prototype.followLink=function(t,e,r){var n=this,o=function(){if(void 0===n.resource)throw new s.default(n.resourceUrl);var o=n.client.getLink(t,n.resource);return{href:c.setParameters(o,e,r),rel:t,method:"GET"}};if(void 0===this.resource)return new a(o,this,this.client);var i=o();this.client.getResource(i.href)},t}();r.builder=function(){return new h};var h=function(){function t(){var t=this;this.withSelfCallback=function(e){return t._getSelf=e,t},this.withLinkCallback=function(e){return t._getLink=e,t},this.withRequestOptions=function(e){return t._withRequestOptions=e,t},this.getRequestOptions=function(e,r){return"function"!=typeof t._withRequestOptions?r:t._withRequestOptions(e,r)},this.getSelf=function(e){return t._getSelf(e)},this.getLink=function(e,r){return t._getLink(e,r)}}return t.prototype.getResource=function(t){return new f({url:t,client:this})},t.prototype.wrapResource=function(t){return new f({resource:t,client:this})},t}()},{"./HttpClient":1,"./TemplateParameters":3,"./errors/LinkNotFoundError":5,"./errors/ResourceNotLoadedError":6}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./errors/UrlMustBeSetError");r.setParameters=function(t,e,r){if(void 0===t)throw new n.default;if(void 0!==e)for(var o in e)e.hasOwnProperty(o)&&(t=t.replace("{"+o+"}",encodeURIComponent(e[o])));if(void 0!==r){var i=function(e){if(r.hasOwnProperty(e)){-1===t.indexOf("?")?t+="?":t+="&";var n=r[e];!1===Array.isArray(n)&&(n=[n]),n.forEach(function(r){t+=e+"="+encodeURIComponent(r)})}};for(var u in r)i(u)}return t.replace(new RegExp("#","g"),"%23")}},{"./errors/UrlMustBeSetError":7}],4:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(e,r,n,o){var i=t.call(this,n)||this;return i.url=e,i.status=r,i.status=n,i.data=o,i.name="HttpError",i}return o(e,t),e}(Error);r.default=i},{}],5:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(e){var r=t.call(this,'link: "'+e+'" not found')||this;return r.rel=e,r.name="LinkNotFoundError",r}return o(e,t),e}(Error);r.default=i},{}],6:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(e){var r=t.call(this,"resource "+e+" not loaded")||this;return r.name="ResourceNotLoadedError",r}return o(e,t),e}(Error);r.default=i},{}],7:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this,"url must be set")||this;return e.name="UrlMustBeSetError",e}return o(e,t),e}(Error);r.default=i},{}]},{},[1,2,3])(3)});